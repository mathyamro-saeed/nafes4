<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ¯Ø±ÙŠØ¨Ø§Øª Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§ÙØ³ - Ø§Ù„ØªØ¯Ø±ÙŠØ¨ 2</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --primary-color: #2e7d32; 
            --header-bg: #0d47a1; 
            --bg-color: #e0f2f1; /* Ø®Ù„ÙÙŠØ© Ù…ÙŠÙ†Øª Ù…ØªØ¨Ø§ÙŠÙ†Ø© ÙˆÙ…Ù†Ø¹Ø´Ø© */
            --accent-gold: #ffb300; 
        }
        body { font-family: 'Vazirmatn', sans-serif; background-color: var(--bg-color); margin: 0; padding: 10px; display: flex; flex-direction: column; align-items: center; }
        
        .header {
            text-align: center; background: var(--header-bg); color: white;
            padding: 15px 10px; border-radius: 12px; width: 100%; max-width: 600px;
            margin-bottom: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .header h1 { margin: 0; font-size: 20px; }
        .header h2 { margin: 5px 0 8px 0; font-size: 16px; font-weight: normal; color: #e3f2fd; }
        .school-title { font-size: 13px; margin-bottom: 5px; opacity: 0.9; }

        .test-note { 
            font-size: 15px; background: rgba(255,255,255,0.15); 
            padding: 12px; border-radius: 8px; margin-top: 10px; 
            color: #fff176; font-weight: bold;
            border: 2px dashed rgba(255,241,118,0.4); line-height: 1.5;
        }

        .staff-info {
            display: flex; justify-content: center; gap: 8px;
            font-size: 10px; border-top: 1px solid rgba(255,255,255,0.2);
            padding-top: 10px; white-space: nowrap;
        }

        .quiz-container { 
            background: white; padding: 30px; border-radius: 18px; 
            width: 100%; max-width: 600px; text-align: center; 
            box-shadow: 0 8px 20px rgba(0,0,0,0.08); 
        }
        .progress-bar { height: 8px; background: #eceff1; border-radius: 4px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary-color); width: 0%; transition: 0.4s; }
        .question-text { font-size: 21px; font-weight: bold; margin-bottom: 30px; color: #263238; line-height: 1.7; }
        
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .option-btn { 
            padding: 18px; font-size: 18px; border: 2px solid #f1f3f4; 
            border-radius: 12px; background: #fafafa; cursor: pointer; 
            font-family: 'Vazirmatn', sans-serif; transition: 0.2s ease;
            color: #37474f;
        }
        .option-btn:hover { border-color: var(--primary-color); background: #f1f8e9; }
        .option-btn:active { transform: scale(0.96); }
        
        #results { display: none; }
        .score-display { font-size: 52px; font-weight: bold; color: var(--header-bg); margin: 15px 0; }
        .retry-btn { 
            background-color: var(--header-bg); color: white; border: none;
            padding: 12px 25px; border-radius: 10px; font-size: 18px;
            cursor: pointer; font-family: 'Vazirmatn'; margin-top: 20px;
            display: inline-flex; align-items: center; gap: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2); 
        }
        
        .loading { border: 4px solid #f3f3f3; border-top: 4px solid var(--header-bg); border-radius: 50%; width: 25px; height: 25px; animation: spin 1s linear infinite; margin: 15px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        @media (max-width: 450px) { .options-grid { grid-template-columns: 1fr; } .header h1 { font-size: 18px; } .test-note { font-size: 13px; } }
    </style>
</head>
<body>

<div class="header">
    <h1>ØªØ¯Ø±ÙŠØ¨Ø§Øª Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§ÙØ³</h1>
    <h2>Ù…Ø¬Ø§Ù„ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª - <span style="color: var(--accent-gold); font-weight: bold;">Ø§Ù„ØªØ¯Ø±ÙŠØ¨ 2</span></h2>
    <div class="school-title">Ù…Ø¯Ø±Ø³Ø© Ø³Ø¹ÙŠØ¯ Ø¨Ù† Ø§Ù„Ù…Ø³ÙŠØ¨ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ø£Ø¨Ù‡Ø§</div>
    <div class="staff-info">
        <span>Ù…Ø¹Ù„Ù… Ø§Ù„Ù…Ø§Ø¯Ø© / Ø£. Ø¹Ù…Ø±Ùˆ Ø§Ù„Ø¹Ù…Ø±ÙŠ</span>
        <span>|</span>
        <span>Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø³Ø© / Ø£. Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ù†Ù‚Ø§Ø²</span>
    </div>
    <div class="test-note">Ù‡Ø°Ø§ Ø§Ø®ØªØ¨Ø§Ø± ØªØ¯Ø±ÙŠØ¨ÙŠ ØŒ ÙˆÙ„Ø§ ÙŠØªØ±ØªØ¨ Ø¹Ù„ÙŠÙ‡ Ù†Ø¬Ø§Ø­ Ø£Ùˆ Ø±Ø³ÙˆØ¨</div>
</div>

<div class="quiz-container" id="quiz-box">
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
    <div id="q-counter" style="font-size:12px; color:#78909c; margin-bottom:12px;">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 15</div>
    <div class="question-text" id="question-text">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    <div class="options-grid" id="options-grid"></div>
</div>

<div class="quiz-container" id="results">
    <h2 style="color:var(--header-bg); font-size: 22px;">Ø±Ø§Ø¦Ø¹ ÙŠØ§ Ø¨Ø·Ù„! Ø£Ù†Ù‡ÙŠØª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø«Ø§Ù†ÙŠ.</h2>
    <p style="font-size: 16px;">Ù„Ù‚Ø¯ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø¯Ø±Ø¬Ø©:</p>
    <div class="score-display" id="final-score">0</div>
    <p style="font-size: 14px; color: #546e7a;">Ø§Ø³ØªØ¹Ø¯ Ù„Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ù‚Ø§Ø¯Ù… Ø¨ÙƒÙ„ Ø­Ù…Ø§Ø³!</p>
    
    <div id="retry-section" style="display:none;">
        <button class="retry-btn" onclick="location.reload()"><span>Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</span> ğŸ”„</button>
        <p style="font-size: 11px; color: #90a4ae; margin-top: 10px;">(Ù„Ø¯ÙŠÙƒ ÙØ±ØµØ© Ø£Ø®ÙŠØ±Ø© Ù„ØªØ­Ø³ÙŠÙ† Ø¯Ø±Ø¬ØªÙƒ)</p>
    </div>
    <div id="status-area" style="margin-top:20px;"><div class="loading"></div></div>
</div>

<script>
    // Ù‡Ø§Ù…: ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø­Ø¯Ø« Ø§Ù„Ø°ÙŠ Ù‚Ù…Øª Ø¨Ù†Ø´Ø±Ù‡ (Deploy)
    const scriptURL = 'https://script.google.com/macros/s/AKfycbyz0lCzVvtxZ_EooOcUuEl8tLDQ0az1-OJa4tE2vRskaaoxIFwDW2-pEN1fSrcdWOkY/exec';

    const quizData = [
        { q: "ÙÙŠ Ø§Ù„Ø¹Ø¯Ø¯ 6924ØŒ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø°ÙŠ ÙŠÙ‚Ø¹ ÙÙŠ Ù…Ù†Ø²Ù„Ø© 'Ø§Ù„Ù…Ø¦Ø§Øª' Ù‡Ùˆ:", a: ["4", "2", "9", "6"], c: 2 },
        { q: "Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ÙŠØ© (9 + 50 + 4000) ØªÙ…Ø«Ù„ Ø§Ù„Ø¹Ø¯Ø¯:", a: ["4509", "4059", "4590", "9540"], c: 1 },
        { q: "Ø£ÙŠ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ§Ù„ÙŠØ© Ù‡Ùˆ Ø¹Ø¯Ø¯ 'Ø²ÙˆØ¬ÙŠ'ØŸ", a: ["2431", "5683", "1208", "3337"], c: 2 },
        { q: "Ù‚Ø§Ø±Ù† Ø¨ÙŠÙ† Ø§Ù„Ø¹Ø¯Ø¯ÙŠÙ†: 8540 (...) 8504", a: [">", "<", "=", "+"], c: 0 },
        { q: "ÙØ·ÙŠØ±Ø© Ù…Ù‚Ø³Ù…Ø© Ø¥Ù„Ù‰ 6 Ø£Ø¬Ø²Ø§Ø¡ Ù…ØªØ·Ø§Ø¨Ù‚Ø©ØŒ Ø£ÙƒÙ„Øª Ù‡Ù†Ø¯ 5 Ø£Ø¬Ø²Ø§Ø¡ Ù…Ù†Ù‡Ø§. Ø§Ù„ÙƒØ³Ø± Ø§Ù„Ø¯Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ù‡Ùˆ:", a: ["1/6", "5/6", "6/5", "1/5"], c: 1 },
        { q: "Ø§Ù„ÙƒØ³Ø± Ø§Ù„Ø°ÙŠ ÙŠÙ‚Ø±Ø£ 'Ø«Ù„Ø§Ø«Ø© Ø£Ø±Ø¨Ø§Ø¹' ÙŠÙƒØªØ¨:", a: ["4/3", "3/4", "1/3", "1/4"], c: 1 },
        { q: "Ø£ÙŠ Ø§Ù„ÙƒØ³ÙˆØ± Ø§Ù„ØªØ§Ù„ÙŠØ© Ø£ØµØºØ± Ù…Ù† 1/2ØŸ", a: ["3/4", "2/3", "1/4", "5/5"], c: 2 },
        { q: "Ø§Ù„ÙƒØ³Ø± Ø§Ù„Ù…ÙƒØ§ÙØ¦ Ù„Ù„ÙƒØ³Ø± 2/3 Ù‡Ùˆ:", a: ["4/6", "1/2", "3/2", "1/3"], c: 0 },
        { q: "Ù†Ø§ØªØ¬ Ø·Ø±Ø­: 700 - 250 = ...", a: ["550", "450", "500", "350"], c: 1 },
        { q: "Ù‚Ø¯Ø± Ù†Ø§ØªØ¬ Ø·Ø±Ø­ 89 - 41 Ø¨Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ Ø¥Ù„Ù‰ Ø£Ù‚Ø±Ø¨ Ø¹Ø´Ø±Ø©:", a: ["30", "40", "50", "60"], c: 2 },
        { q: "Ù…ÙƒØªØ¨Ø© ÙÙŠÙ‡Ø§ 350 ÙƒØªØ§Ø¨Ø§Ù‹ØŒ Ø§Ø³ØªØ¹Ø§Ø± Ø§Ù„Ø·Ù„Ø§Ø¨ Ù…Ù†Ù‡Ø§ 100 ÙƒØªØ§Ø¨. ÙƒÙ… ÙƒØªØ§Ø¨Ø§Ù‹ Ø¨Ù‚ÙŠØŸ", a: ["450 ÙƒØªØ§Ø¨Ø§Ù‹", "250 ÙƒØªØ§Ø¨Ø§Ù‹", "200 ÙƒØªØ§Ø¨", "300 ÙƒØªØ§Ø¨"], c: 1 },
        { q: "ÙÙŠ ØºØ±ÙØ© Ø§Ù„ØµÙ 3 ØµÙÙˆÙ Ù…Ù† Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ØŒ ÙÙŠ ÙƒÙ„ ØµÙ 6 Ù…Ù‚Ø§Ø¹Ø¯. Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù‡ÙŠ:", a: ["3 + 6", "6 - 3", "3 Ã— 6", "6 Ã· 3"], c: 2 },
        { q: "ÙŠØ±ÙŠØ¯ Ù…Ø¹Ù„Ù… ØªÙˆØ²ÙŠØ¹ 20 Ù‚Ù„Ù…Ø§Ù‹ Ø¨Ø§Ù„ØªØ³Ø§ÙˆÙŠ Ø¹Ù„Ù‰ 5 Ø·Ù„Ø§Ø¨. ÙƒÙ… Ù‚Ù„Ù…Ø§Ù‹ Ø³ÙŠØ£Ø®Ø° ÙƒÙ„ Ø·Ø§Ù„Ø¨ØŸ", a: ["4 Ø£Ù‚Ù„Ø§Ù…", "5 Ø£Ù‚Ù„Ø§Ù…", "10 Ø£Ù‚Ù„Ø§Ù…", "25 Ù‚Ù„Ù…Ø§Ù‹"], c: 0 },
        { q: "Ù†Ø§ØªØ¬ Ù‚Ø³Ù…Ø© 36 Ã· 6 = ...", a: ["5", "6", "7", "8"], c: 1 },
        { q: "ØªÙˆÙØ± Ù†ÙˆØ±Ø© 5 Ø±ÙŠØ§Ù„Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹. ÙƒÙ… Ø±ÙŠØ§Ù„Ø§Ù‹ ØªÙˆÙØ± ÙÙŠ 4 Ø£ÙŠØ§Ù…ØŸ", a: ["9 Ø±ÙŠØ§Ù„Ø§Øª", "15 Ø±ÙŠØ§Ù„Ø§Ù‹", "20 Ø±ÙŠØ§Ù„Ø§Ù‹", "25 Ø±ÙŠØ§Ù„Ø§Ù‹"], c: 2 }
    ];

    let currentIdx = 0, score = 0, qStats = [];
    let attempts = parseInt(localStorage.getItem('nafis_training_2_attempts')) || 0;

    if(attempts >= 2) {
        document.body.innerHTML = "<div class='quiz-container' style='margin-top:50px;'><h3>Ø¨Ø·Ù„ Ù†Ø§ÙØ³!</h3><p>Ù„Ù‚Ø¯ Ø£Ù†Ø¬Ø²Øª Ù…Ø­Ø§ÙˆÙ„ØªÙŠÙ† ÙÙŠ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ (2). Ù†Ø±Ø§Ùƒ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ù‚Ø§Ø¯Ù…!</p></div>";
    }

    function loadQuestion() {
        const q = quizData[currentIdx];
        document.getElementById("q-counter").innerText = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentIdx + 1} Ù…Ù† 15`;
        document.getElementById("progress-fill").style.width = `${((currentIdx + 1) / 15) * 100}%`;
        document.getElementById("question-text").innerText = q.q;
        const grid = document.getElementById("options-grid");
        grid.innerHTML = "";
        
        q.a.forEach((opt, i) => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => {
                let isCorrect = (i === q.c) ? 1 : 0;
                if(isCorrect) score++;
                qStats.push(isCorrect);
                currentIdx++;
                if(currentIdx < quizData.length) loadQuestion();
                else submitData();
            };
            grid.appendChild(btn);
        });
    }

    function submitData() {
        document.getElementById('quiz-box').style.display = 'none';
        document.getElementById('results').style.display = 'block';
        document.getElementById('final-score').innerText = score + " / 15";
        attempts++;
        localStorage.setItem('nafis_training_2_attempts', attempts);

        if (attempts < 2) {
            document.getElementById('retry-section').style.display = 'block';
        }

        fetch(scriptURL, {
            method: 'POST',
            mode: 'no-cors',
            body: JSON.stringify({ 
                score: score, 
                qStats: qStats, 
                attempt: attempts,
                testID: "2" // Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¨ÙˆØ±Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„ Ø±Ù‚Ù… 2
            })
        }).then(() => {
            document.getElementById('status-area').innerHTML = "<p style='color:#2e7d32; font-weight:bold; font-size:12px;'>âœ“ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù†ØªÙŠØ¬ØªÙƒ Ù„Ù„Ù…Ø¹Ù„Ù… Ø¨Ù†Ø¬Ø§Ø­</p>";
        }).catch(() => {
            document.getElementById('status-area').innerHTML = "";
        });
    }
    loadQuestion();
</script>
</body>
</html>
